2025-12-16 12:49:43.019 +05:30 [FTL] Application terminated unexpectedly
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at Program.<Main>$(String[] args) in C:\Users\w199615\OneDrive - Worldline SA\Projects\event-tracking-tool\src\Services\EventTracker.Auth\EventTracker.Auth.API\Program.cs:line 31
2025-12-16 12:55:53.581 +05:30 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-16 12:55:54.098 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 12:55:54.160 +05:30 [DBG] Creating DbConnection.
2025-12-16 12:55:54.205 +05:30 [DBG] Created DbConnection. (43ms).
2025-12-16 12:55:54.212 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:55:54.361 +05:30 [DBG] An error occurred using the connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:55:54.461 +05:30 [DBG] Creating DbConnection.
2025-12-16 12:55:54.568 +05:30 [DBG] Created DbConnection. (107ms).
2025-12-16 12:55:54.572 +05:30 [DBG] Opening connection to database 'master' on server '(local)'.
2025-12-16 12:55:54.590 +05:30 [DBG] Opened connection to database 'master' on server '(local)'.
2025-12-16 12:55:54.597 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 12:55:54.604 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2025-12-16 12:55:54.608 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (12ms).
2025-12-16 12:55:54.614 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [EventTracker_Auth];
2025-12-16 12:55:54.808 +05:30 [INF] Executed DbCommand (193ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [EventTracker_Auth];
2025-12-16 12:55:54.811 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 12:55:54.812 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-12-16 12:55:54.813 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-12-16 12:55:54.814 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EventTracker_Auth] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-12-16 12:55:54.887 +05:30 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EventTracker_Auth] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-12-16 12:55:54.890 +05:30 [DBG] Closing connection to database 'master' on server '(local)'.
2025-12-16 12:55:54.897 +05:30 [DBG] Closed connection to database 'master' on server '(local)' (4ms).
2025-12-16 12:55:54.900 +05:30 [DBG] Disposing connection to database 'master' on server '(local)'.
2025-12-16 12:55:54.902 +05:30 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-16 12:55:54.904 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:55:54.908 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:55:54.909 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 12:55:54.910 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-12-16 12:55:54.911 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-12-16 12:55:54.913 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 12:55:54.919 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 12:55:54.921 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:55:54.923 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (1ms).
2025-12-16 12:55:54.971 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:55:54.973 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:55:54.975 +05:30 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-12-16 12:55:54.981 +05:30 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-12-16 12:55:54.982 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 12:55:54.983 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-12-16 12:55:54.985 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-12-16 12:55:54.986 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [FirstName] nvarchar(max) NOT NULL,
    [LastName] nvarchar(max) NOT NULL,
    [AzureAdId] nvarchar(450) NOT NULL,
    [ProfilePictureUrl] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [IsActive] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NULL,
    [LastLoginAt] datetime2 NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-12-16 12:55:54.997 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [FirstName] nvarchar(max) NOT NULL,
    [LastName] nvarchar(max) NOT NULL,
    [AzureAdId] nvarchar(450) NOT NULL,
    [ProfilePictureUrl] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [IsActive] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NULL,
    [LastLoginAt] datetime2 NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-12-16 12:55:54.999 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 12:55:55.000 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-12-16 12:55:55.001 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-12-16 12:55:55.002 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserProfiles] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Bio] nvarchar(max) NOT NULL,
    [Company] nvarchar(max) NOT NULL,
    [JobTitle] nvarchar(max) NOT NULL,
    [PhoneNumber] nvarchar(max) NOT NULL,
    [Country] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_UserProfiles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserProfiles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-12-16 12:55:55.007 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserProfiles] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Bio] nvarchar(max) NOT NULL,
    [Company] nvarchar(max) NOT NULL,
    [JobTitle] nvarchar(max) NOT NULL,
    [PhoneNumber] nvarchar(max) NOT NULL,
    [Country] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_UserProfiles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserProfiles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-12-16 12:55:55.009 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 12:55:55.010 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-12-16 12:55:55.011 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-12-16 12:55:55.012 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserProfiles_UserId] ON [UserProfiles] ([UserId]);
2025-12-16 12:55:55.017 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserProfiles_UserId] ON [UserProfiles] ([UserId]);
2025-12-16 12:55:55.020 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 12:55:55.021 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-12-16 12:55:55.022 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-12-16 12:55:55.023 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_AzureAdId] ON [Users] ([AzureAdId]);
2025-12-16 12:55:55.026 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_AzureAdId] ON [Users] ([AzureAdId]);
2025-12-16 12:55:55.028 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 12:55:55.029 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-12-16 12:55:55.029 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-12-16 12:55:55.031 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2025-12-16 12:55:55.033 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2025-12-16 12:55:55.036 +05:30 [DBG] Committing transaction.
2025-12-16 12:55:55.039 +05:30 [DBG] Committed transaction.
2025-12-16 12:55:55.040 +05:30 [DBG] Disposing transaction.
2025-12-16 12:55:55.041 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:55:55.042 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (0ms).
2025-12-16 12:55:55.044 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 12:55:55.045 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:55:55.046 +05:30 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-16 12:55:55.081 +05:30 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-16 12:55:55.111 +05:30 [DBG] Hosting starting
2025-12-16 12:55:55.120 +05:30 [INF] User profile is available. Using 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-16 12:55:55.128 +05:30 [DBG] Reading data from file 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys\key-0f9824b6-b006-44d6-96a0-7f00dad5e3f2.xml'.
2025-12-16 12:55:55.138 +05:30 [DBG] Found key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2}.
2025-12-16 12:55:55.146 +05:30 [DBG] Considering key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} with expiration date 2026-03-11 06:25:41Z as default key.
2025-12-16 12:55:55.149 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 12:55:55.150 +05:30 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-16 12:55:55.153 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 12:55:55.157 +05:30 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-16 12:55:55.159 +05:30 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-16 12:55:55.162 +05:30 [DBG] Using key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} as the default key.
2025-12-16 12:55:55.164 +05:30 [DBG] Key ring with default key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} was loaded during application startup.
2025-12-16 12:55:55.208 +05:30 [INF] Now listening on: http://localhost:5085
2025-12-16 12:55:55.210 +05:30 [DBG] Loaded hosting startup assembly EventTracker.Auth.API
2025-12-16 12:55:55.211 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-12-16 12:55:55.212 +05:30 [INF] Hosting environment: Development
2025-12-16 12:55:55.213 +05:30 [INF] Content root path: C:\Users\w199615\OneDrive - Worldline SA\Projects\event-tracking-tool\src\Services\EventTracker.Auth\EventTracker.Auth.API
2025-12-16 12:55:55.214 +05:30 [DBG] Hosting started
2025-12-16 12:57:52.686 +05:30 [DBG] Connection id "0HNHSEIFRKPJO" accepted.
2025-12-16 12:57:52.689 +05:30 [DBG] Connection id "0HNHSEIFRKPJO" started.
2025-12-16 12:57:52.689 +05:30 [DBG] Connection id "0HNHSEIFRKPJP" accepted.
2025-12-16 12:57:52.701 +05:30 [DBG] Connection id "0HNHSEIFRKPJP" started.
2025-12-16 12:57:52.732 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5085/ - null null
2025-12-16 12:57:52.743 +05:30 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-16 12:57:52.761 +05:30 [DBG] No candidates found for the request path '/'
2025-12-16 12:57:52.763 +05:30 [DBG] Request did not match any endpoints
2025-12-16 12:57:52.784 +05:30 [DBG] Connection id "0HNHSEIFRKPJO" completed keep alive response.
2025-12-16 12:57:52.789 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5085/ - 301 0 null 57.4209ms
2025-12-16 12:57:52.797 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5085/index.html - null null
2025-12-16 12:57:52.799 +05:30 [DBG] No candidates found for the request path '/index.html'
2025-12-16 12:57:52.800 +05:30 [DBG] Request did not match any endpoints
2025-12-16 12:57:52.847 +05:30 [DBG] Connection id "0HNHSEIFRKPJO" completed keep alive response.
2025-12-16 12:57:52.849 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5085/index.html - 200 null text/html;charset=utf-8 51.9517ms
2025-12-16 12:57:52.890 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5085/swagger-ui.css - null null
2025-12-16 12:57:52.890 +05:30 [DBG] Connection id "0HNHSEIFRKPJQ" accepted.
2025-12-16 12:57:52.890 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5085/swagger-ui-bundle.js - null null
2025-12-16 12:57:52.892 +05:30 [DBG] No candidates found for the request path '/swagger-ui.css'
2025-12-16 12:57:52.892 +05:30 [DBG] Connection id "0HNHSEIFRKPJQ" started.
2025-12-16 12:57:52.894 +05:30 [DBG] No candidates found for the request path '/swagger-ui-bundle.js'
2025-12-16 12:57:52.895 +05:30 [DBG] Request did not match any endpoints
2025-12-16 12:57:52.896 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5085/swagger-ui-standalone-preset.js - null null
2025-12-16 12:57:52.896 +05:30 [DBG] Request did not match any endpoints
2025-12-16 12:57:52.899 +05:30 [DBG] No candidates found for the request path '/swagger-ui-standalone-preset.js'
2025-12-16 12:57:52.900 +05:30 [DBG] Request did not match any endpoints
2025-12-16 12:57:52.910 +05:30 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-12-16 12:57:52.910 +05:30 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-12-16 12:57:52.919 +05:30 [DBG] Connection id "0HNHSEIFRKPJO" completed keep alive response.
2025-12-16 12:57:52.920 +05:30 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-12-16 12:57:52.921 +05:30 [DBG] Connection id "0HNHSEIFRKPJQ" completed keep alive response.
2025-12-16 12:57:52.923 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5085/swagger-ui.css - 200 152034 text/css 32.862ms
2025-12-16 12:57:52.926 +05:30 [DBG] Connection id "0HNHSEIFRKPJP" completed keep alive response.
2025-12-16 12:57:52.927 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5085/swagger-ui-standalone-preset.js - 200 230280 text/javascript 31.3434ms
2025-12-16 12:57:52.931 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5085/swagger-ui-bundle.js - 200 1456926 text/javascript 40.3512ms
2025-12-16 12:57:53.082 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5085/swagger/v1/swagger.json - null null
2025-12-16 12:57:53.084 +05:30 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-12-16 12:57:53.085 +05:30 [DBG] Request did not match any endpoints
2025-12-16 12:57:53.104 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5085/favicon-32x32.png - null null
2025-12-16 12:57:53.107 +05:30 [DBG] No candidates found for the request path '/favicon-32x32.png'
2025-12-16 12:57:53.109 +05:30 [DBG] Request did not match any endpoints
2025-12-16 12:57:53.110 +05:30 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-12-16 12:57:53.112 +05:30 [DBG] Connection id "0HNHSEIFRKPJQ" completed keep alive response.
2025-12-16 12:57:53.115 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5085/favicon-32x32.png - 200 628 image/png 10.6064ms
2025-12-16 12:57:53.174 +05:30 [DBG] Connection id "0HNHSEIFRKPJP" completed keep alive response.
2025-12-16 12:57:53.176 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5085/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 93.9489ms
2025-12-16 12:58:56.524 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5085/api/Auth/login - application/json 77
2025-12-16 12:58:56.532 +05:30 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-16 12:58:56.535 +05:30 [DBG] Endpoint 'EventTracker.Auth.API.Controllers.AuthController.Login (EventTracker.Auth.API)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-12-16 12:58:56.537 +05:30 [DBG] Request matched endpoint 'EventTracker.Auth.API.Controllers.AuthController.Login (EventTracker.Auth.API)'
2025-12-16 12:58:56.539 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 12:58:56.540 +05:30 [WRN] Failed to determine the https port for redirect.
2025-12-16 12:58:56.542 +05:30 [DBG] The request has an origin header: 'http://localhost:5085'.
2025-12-16 12:58:56.543 +05:30 [INF] CORS policy execution successful.
2025-12-16 12:58:56.575 +05:30 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-16 12:58:56.578 +05:30 [INF] Executing endpoint 'EventTracker.Auth.API.Controllers.AuthController.Login (EventTracker.Auth.API)'
2025-12-16 12:58:56.597 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EventTracker.Auth.Application.DTOs.LoginRequestDto) on controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API).
2025-12-16 12:58:56.600 +05:30 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-16 12:58:56.601 +05:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-16 12:58:56.603 +05:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-16 12:58:56.605 +05:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-16 12:58:56.606 +05:30 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-16 12:58:56.609 +05:30 [DBG] Executing controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 12:58:56.671 +05:30 [DBG] Executed controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 12:58:56.677 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.LoginRequestDto' ...
2025-12-16 12:58:56.680 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.LoginRequestDto' using the name '' in request data ...
2025-12-16 12:58:56.683 +05:30 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-16 12:58:56.692 +05:30 [DBG] Connection id "0HNHSEIFRKPJP", Request id "0HNHSEIFRKPJP:00000003": started reading request body.
2025-12-16 12:58:56.693 +05:30 [DBG] Connection id "0HNHSEIFRKPJP", Request id "0HNHSEIFRKPJP:00000003": done reading request body.
2025-12-16 12:58:56.699 +05:30 [DBG] JSON input formatter succeeded, deserializing to type 'EventTracker.Auth.Application.DTOs.LoginRequestDto'
2025-12-16 12:58:56.700 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.LoginRequestDto'.
2025-12-16 12:58:56.702 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.LoginRequestDto'.
2025-12-16 12:58:56.703 +05:30 [DBG] Attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.LoginRequestDto' ...
2025-12-16 12:58:56.709 +05:30 [DBG] Done attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.LoginRequestDto'.
2025-12-16 12:58:56.713 +05:30 [INF] Login attempt for email: harshgaikwadofficial@gmail.com
2025-12-16 12:58:56.734 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 12:58:56.784 +05:30 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Profiles)
    .FirstOrDefault(u => u.Email.ToLower() == __ToLower_0)'
2025-12-16 12:58:56.820 +05:30 [DBG] Including navigation: 'User.Profiles'.
2025-12-16 12:58:56.991 +05:30 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AzureAdId (string) Required Index, 1], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: User.Email (string) Required Index, 3], [Property: User.FirstName (string) Required, 4], [Property: User.IsActive (bool) Required, 5], [Property: User.LastLoginAt (DateTime?), 6], [Property: User.LastName (string) Required, 7], [Property: User.ProfilePictureUrl (string) Required, 8], [Property: User.Role (UserRole) Required, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserProfile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: UserProfile.Bio (string) Required, 12], [Property: UserProfile.Company (string) Required, 13], [Property: UserProfile.Country (string) Required, 14], [Property: UserProfile.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: UserProfile.JobTitle (string) Required, 16], [Property: UserProfile.PhoneNumber (string) Required, 17], [Property: UserProfile.UpdatedAt (DateTime?), 18], [Property: UserProfile.UserId (Guid) Required FK Index, 19] }
                3 -> 11
            SELECT t.Id, t.AzureAdId, t.CreatedAt, t.Email, t.FirstName, t.IsActive, t.LastLoginAt, t.LastName, t.ProfilePictureUrl, t.Role, t.UpdatedAt, u0.Id, u0.Bio, u0.Company, u0.Country, u0.CreatedAt, u0.JobTitle, u0.PhoneNumber, u0.UpdatedAt, u0.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AzureAdId, u.CreatedAt, u.Email, u.FirstName, u.IsActive, u.LastLoginAt, u.LastName, u.ProfilePictureUrl, u.Role, u.UpdatedAt
                FROM Users AS u
                WHERE LOWER(u.Email) == @__ToLower_0
            ) AS t
            LEFT JOIN UserProfiles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        EventTracker.Auth.Infrastructure.Persistence.AuthDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-16 12:58:57.022 +05:30 [DBG] Creating DbConnection.
2025-12-16 12:58:57.024 +05:30 [DBG] Created DbConnection. (1ms).
2025-12-16 12:58:57.025 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:58:57.029 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:58:57.031 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 12:58:57.032 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-16 12:58:57.036 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-16 12:58:57.039 +05:30 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Email]) = @__ToLower_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 12:58:57.091 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__ToLower_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Email]) = @__ToLower_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 12:58:57.103 +05:30 [DBG] Closing data reader to 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:58:57.107 +05:30 [DBG] A data reader for 'EventTracker_Auth' on server '(local)' is being disposed after spending 13ms reading results.
2025-12-16 12:58:57.110 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:58:57.113 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 12:58:57.115 +05:30 [ERR] Login failed: User with ID 00000000-0000-0000-0000-000000000000 not found
2025-12-16 12:58:57.116 +05:30 [ERR] Login error: User with ID 00000000-0000-0000-0000-000000000000 not found
2025-12-16 12:58:57.120 +05:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-16 12:58:57.123 +05:30 [DBG] No information found on request to perform content negotiation.
2025-12-16 12:58:57.123 +05:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-16 12:58:57.124 +05:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-16 12:58:57.126 +05:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-16 12:58:57.128 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-16 12:58:57.138 +05:30 [INF] Executed action EventTracker.Auth.API.Controllers.AuthController.Login (EventTracker.Auth.API) in 526.5576ms
2025-12-16 12:58:57.140 +05:30 [INF] Executed endpoint 'EventTracker.Auth.API.Controllers.AuthController.Login (EventTracker.Auth.API)'
2025-12-16 12:58:57.142 +05:30 [DBG] Connection id "0HNHSEIFRKPJP" completed keep alive response.
2025-12-16 12:58:57.144 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 12:58:57.147 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 12:58:57.148 +05:30 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-16 12:58:57.150 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5085/api/Auth/login - 401 null application/json; charset=utf-8 626.1986ms
2025-12-16 13:00:03.784 +05:30 [DBG] Connection id "0HNHSEIFRKPJO" disconnecting.
2025-12-16 13:00:03.789 +05:30 [DBG] Connection id "0HNHSEIFRKPJO" stopped.
2025-12-16 13:00:03.794 +05:30 [DBG] Connection id "0HNHSEIFRKPJO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-16 13:00:04.788 +05:30 [DBG] Connection id "0HNHSEIFRKPJQ" disconnecting.
2025-12-16 13:00:04.853 +05:30 [DBG] Connection id "0HNHSEIFRKPJQ" stopped.
2025-12-16 13:00:04.876 +05:30 [DBG] Connection id "0HNHSEIFRKPJQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-16 13:00:29.857 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5085/api/Auth/register - application/json 119
2025-12-16 13:00:29.863 +05:30 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-12-16 13:00:29.864 +05:30 [DBG] Endpoint 'EventTracker.Auth.API.Controllers.AuthController.Register (EventTracker.Auth.API)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-12-16 13:00:29.866 +05:30 [DBG] Request matched endpoint 'EventTracker.Auth.API.Controllers.AuthController.Register (EventTracker.Auth.API)'
2025-12-16 13:00:29.868 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 13:00:29.869 +05:30 [DBG] The request has an origin header: 'http://localhost:5085'.
2025-12-16 13:00:29.870 +05:30 [INF] CORS policy execution successful.
2025-12-16 13:00:29.872 +05:30 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-16 13:00:29.873 +05:30 [INF] Executing endpoint 'EventTracker.Auth.API.Controllers.AuthController.Register (EventTracker.Auth.API)'
2025-12-16 13:00:29.877 +05:30 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EventTracker.Auth.Application.DTOs.RegisterRequestDto) on controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API).
2025-12-16 13:00:29.880 +05:30 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-16 13:00:29.881 +05:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-16 13:00:29.883 +05:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-16 13:00:29.885 +05:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-16 13:00:29.886 +05:30 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-16 13:00:29.888 +05:30 [DBG] Executing controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 13:00:29.890 +05:30 [DBG] Executed controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 13:00:29.892 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.RegisterRequestDto' ...
2025-12-16 13:00:29.894 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.RegisterRequestDto' using the name '' in request data ...
2025-12-16 13:00:29.895 +05:30 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-16 13:00:29.898 +05:30 [DBG] Connection id "0HNHSEIFRKPJP", Request id "0HNHSEIFRKPJP:00000004": started reading request body.
2025-12-16 13:00:29.899 +05:30 [DBG] Connection id "0HNHSEIFRKPJP", Request id "0HNHSEIFRKPJP:00000004": done reading request body.
2025-12-16 13:00:29.901 +05:30 [DBG] JSON input formatter succeeded, deserializing to type 'EventTracker.Auth.Application.DTOs.RegisterRequestDto'
2025-12-16 13:00:29.902 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.RegisterRequestDto'.
2025-12-16 13:00:29.904 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.RegisterRequestDto'.
2025-12-16 13:00:29.906 +05:30 [DBG] Attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.RegisterRequestDto' ...
2025-12-16 13:00:29.909 +05:30 [DBG] Done attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.RegisterRequestDto'.
2025-12-16 13:00:29.911 +05:30 [INF] Registration attempt for email: harshgaikwadofficial@gmail.com
2025-12-16 13:00:29.952 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 13:00:29.958 +05:30 [DBG] Creating DbConnection.
2025-12-16 13:00:29.958 +05:30 [DBG] Created DbConnection. (0ms).
2025-12-16 13:00:29.960 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:00:29.962 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:00:29.963 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 13:00:29.964 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-16 13:00:29.965 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-16 13:00:29.966 +05:30 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Email]) = @__ToLower_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 13:00:29.970 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__ToLower_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Email]) = @__ToLower_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 13:00:29.972 +05:30 [DBG] Closing data reader to 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:00:29.973 +05:30 [DBG] A data reader for 'EventTracker_Auth' on server '(local)' is being disposed after spending 1ms reading results.
2025-12-16 13:00:29.975 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:00:29.976 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (1ms).
2025-12-16 13:00:30.035 +05:30 [DBG] Context 'AuthDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-16 13:00:30.039 +05:30 [DBG] SaveChanges starting for 'AuthDbContext'.
2025-12-16 13:00:30.042 +05:30 [DBG] DetectChanges starting for 'AuthDbContext'.
2025-12-16 13:00:30.057 +05:30 [DBG] DetectChanges completed for 'AuthDbContext'.
2025-12-16 13:00:30.102 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:00:30.104 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:00:30.107 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 13:00:30.107 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-16 13:00:30.110 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-16 13:00:30.112 +05:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 13:00:30.125 +05:30 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 13:00:30.129 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:00:30.131 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (1ms).
2025-12-16 13:00:30.147 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'EventTracker.Auth.Infrastructure.Persistence.AuthDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'AzureAdId', table 'EventTracker_Auth.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9376419-246a-44ff-a982-29090a9a297a
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'AzureAdId', table 'EventTracker_Auth.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9376419-246a-44ff-a982-29090a9a297a
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-16 13:00:30.158 +05:30 [ERR] Registration error: An error occurred while saving the entity changes. See the inner exception for details.
2025-12-16 13:00:30.159 +05:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-16 13:00:30.161 +05:30 [DBG] No information found on request to perform content negotiation.
2025-12-16 13:00:30.162 +05:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-16 13:00:30.163 +05:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-16 13:00:30.164 +05:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-16 13:00:30.165 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-16 13:00:30.168 +05:30 [INF] Executed action EventTracker.Auth.API.Controllers.AuthController.Register (EventTracker.Auth.API) in 279.93ms
2025-12-16 13:00:30.169 +05:30 [INF] Executed endpoint 'EventTracker.Auth.API.Controllers.AuthController.Register (EventTracker.Auth.API)'
2025-12-16 13:00:30.171 +05:30 [DBG] Connection id "0HNHSEIFRKPJP" completed keep alive response.
2025-12-16 13:00:30.172 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 13:00:30.173 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:00:30.175 +05:30 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-16 13:00:30.177 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5085/api/Auth/register - 400 null application/json; charset=utf-8 320.0545ms
2025-12-16 13:02:41.775 +05:30 [DBG] Connection id "0HNHSEIFRKPJP" disconnecting.
2025-12-16 13:02:41.780 +05:30 [DBG] Connection id "0HNHSEIFRKPJP" stopped.
2025-12-16 13:02:41.783 +05:30 [DBG] Connection id "0HNHSEIFRKPJP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-16 13:08:18.399 +05:30 [INF] Application is shutting down...
2025-12-16 13:08:18.400 +05:30 [DBG] Hosting stopping
2025-12-16 13:08:18.405 +05:30 [DBG] Hosting stopped
2025-12-16 13:42:54.789 +05:30 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-16 13:42:55.640 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 13:42:55.662 +05:30 [DBG] Creating DbConnection.
2025-12-16 13:42:55.761 +05:30 [DBG] Created DbConnection. (94ms).
2025-12-16 13:42:55.778 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:42:56.095 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:42:56.105 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 13:42:56.117 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (8ms).
2025-12-16 13:42:56.126 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (24ms).
2025-12-16 13:42:56.140 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 13:42:56.198 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 13:42:56.204 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:42:56.218 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (8ms).
2025-12-16 13:42:56.224 +05:30 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-16 13:42:56.227 +05:30 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-12-16 13:42:56.229 +05:30 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-12-16 13:42:56.232 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:42:56.235 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:42:56.238 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 13:42:56.330 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 13:42:56.336 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:42:56.339 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 13:42:56.343 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 13:42:56.347 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 13:42:56.351 +05:30 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-16 13:42:56.412 +05:30 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-16 13:42:56.479 +05:30 [DBG] Hosting starting
2025-12-16 13:42:56.493 +05:30 [INF] User profile is available. Using 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-16 13:42:56.504 +05:30 [DBG] Reading data from file 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys\key-0f9824b6-b006-44d6-96a0-7f00dad5e3f2.xml'.
2025-12-16 13:42:56.512 +05:30 [DBG] Found key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2}.
2025-12-16 13:42:56.522 +05:30 [DBG] Considering key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} with expiration date 2026-03-11 06:25:41Z as default key.
2025-12-16 13:42:56.526 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 13:42:56.529 +05:30 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-16 13:42:56.532 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 13:42:56.538 +05:30 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-16 13:42:56.542 +05:30 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-16 13:42:56.545 +05:30 [DBG] Using key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} as the default key.
2025-12-16 13:42:56.547 +05:30 [DBG] Key ring with default key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} was loaded during application startup.
2025-12-16 13:42:56.590 +05:30 [INF] Now listening on: http://localhost:5085
2025-12-16 13:42:56.592 +05:30 [DBG] Loaded hosting startup assembly EventTracker.Auth.API
2025-12-16 13:42:56.593 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-12-16 13:42:56.594 +05:30 [INF] Hosting environment: Development
2025-12-16 13:42:56.596 +05:30 [INF] Content root path: C:\Users\w199615\OneDrive - Worldline SA\Projects\event-tracking-tool\src\Services\EventTracker.Auth\EventTracker.Auth.API
2025-12-16 13:42:56.597 +05:30 [DBG] Hosting started
2025-12-16 15:05:43.525 +05:30 [DBG] Connection id "0HNHSGPTUFBKU" accepted.
2025-12-16 15:05:43.528 +05:30 [DBG] Connection id "0HNHSGPTUFBKU" started.
2025-12-16 15:05:43.560 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - null null
2025-12-16 15:05:43.576 +05:30 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-16 15:05:43.598 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:05:43.600 +05:30 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-16 15:05:43.615 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:05:43.617 +05:30 [WRN] Failed to determine the https port for redirect.
2025-12-16 15:05:43.620 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:05:43.622 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:05:43.626 +05:30 [DBG] The request is a preflight request.
2025-12-16 15:05:43.630 +05:30 [DBG] Connection id "0HNHSGPTUFBKU" completed keep alive response.
2025-12-16 15:05:43.633 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - 204 null null 76.0136ms
2025-12-16 15:05:43.639 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - application/json 2654
2025-12-16 15:05:43.645 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:05:43.649 +05:30 [DBG] Endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)' with route pattern 'api/Auth/azure-ad-callback' is valid for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:05:43.651 +05:30 [DBG] Request matched endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:05:43.654 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:05:43.656 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:05:43.659 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:05:43.696 +05:30 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-16 15:05:43.700 +05:30 [INF] Executing endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:05:43.723 +05:30 [INF] Route matched with {action = "AzureAdCallback", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AzureAdCallback(EventTracker.Auth.Application.DTOs.AzureAdCallbackDto) on controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API).
2025-12-16 15:05:43.727 +05:30 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-16 15:05:43.729 +05:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-16 15:05:43.733 +05:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-16 15:05:43.736 +05:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-16 15:05:43.739 +05:30 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-16 15:05:43.744 +05:30 [DBG] Executing controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:05:43.863 +05:30 [DBG] Executed controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:05:43.871 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:05:43.877 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' using the name '' in request data ...
2025-12-16 15:05:43.881 +05:30 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-16 15:05:43.901 +05:30 [DBG] Connection id "0HNHSGPTUFBKU", Request id "0HNHSGPTUFBKU:00000002": started reading request body.
2025-12-16 15:05:43.904 +05:30 [DBG] Connection id "0HNHSGPTUFBKU", Request id "0HNHSGPTUFBKU:00000002": done reading request body.
2025-12-16 15:05:43.915 +05:30 [DBG] JSON input formatter succeeded, deserializing to type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'
2025-12-16 15:05:43.919 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:05:43.923 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:05:43.929 +05:30 [DBG] Attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:05:43.959 +05:30 [DBG] Done attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:05:43.982 +05:30 [INF] Azure AD callback received
2025-12-16 15:05:44.001 +05:30 [INF] Authenticating with Azure AD token
2025-12-16 15:05:44.094 +05:30 [INF] Azure AD user: harshgaikwadofficial@gmail.com (ID: fa6d8e40-ed52-44cf-8bd4-7efae237070d)
2025-12-16 15:05:44.163 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 15:05:44.245 +05:30 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Profiles)
    .FirstOrDefault(u => u.AzureAdId == __azureAdId_0)'
2025-12-16 15:05:44.326 +05:30 [DBG] Including navigation: 'User.Profiles'.
2025-12-16 15:05:44.589 +05:30 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AzureAdId (string) Index, 1], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: User.Email (string) Required Index, 3], [Property: User.FirstName (string) Required, 4], [Property: User.IsActive (bool) Required, 5], [Property: User.LastLoginAt (DateTime?), 6], [Property: User.LastName (string) Required, 7], [Property: User.ProfilePictureUrl (string), 8], [Property: User.Role (UserRole) Required, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserProfile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: UserProfile.Bio (string) Required, 12], [Property: UserProfile.Company (string) Required, 13], [Property: UserProfile.Country (string) Required, 14], [Property: UserProfile.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: UserProfile.JobTitle (string) Required, 16], [Property: UserProfile.PhoneNumber (string) Required, 17], [Property: UserProfile.UpdatedAt (DateTime?), 18], [Property: UserProfile.UserId (Guid) Required FK Index, 19] }
                3 -> 11
            SELECT t.Id, t.AzureAdId, t.CreatedAt, t.Email, t.FirstName, t.IsActive, t.LastLoginAt, t.LastName, t.ProfilePictureUrl, t.Role, t.UpdatedAt, u0.Id, u0.Bio, u0.Company, u0.Country, u0.CreatedAt, u0.JobTitle, u0.PhoneNumber, u0.UpdatedAt, u0.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AzureAdId, u.CreatedAt, u.Email, u.FirstName, u.IsActive, u.LastLoginAt, u.LastName, u.ProfilePictureUrl, u.Role, u.UpdatedAt
                FROM Users AS u
                WHERE u.AzureAdId == @__azureAdId_0
            ) AS t
            LEFT JOIN UserProfiles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        EventTracker.Auth.Infrastructure.Persistence.AuthDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-16 15:05:44.631 +05:30 [DBG] Creating DbConnection.
2025-12-16 15:05:44.633 +05:30 [DBG] Created DbConnection. (1ms).
2025-12-16 15:05:44.636 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:05:44.648 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:05:44.651 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:05:44.652 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-16 15:05:44.658 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-12-16 15:05:44.663 +05:30 [DBG] Executing DbCommand [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:05:44.694 +05:30 [INF] Executed DbCommand (33ms) [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:05:44.709 +05:30 [DBG] Closing data reader to 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:05:44.714 +05:30 [DBG] A data reader for 'EventTracker_Auth' on server '(local)' is being disposed after spending 14ms reading results.
2025-12-16 15:05:44.719 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:05:44.721 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 15:05:44.725 +05:30 [INF] Creating new user from Azure AD: harshgaikwadofficial@gmail.com
2025-12-16 15:05:44.806 +05:30 [DBG] Context 'AuthDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-16 15:05:44.811 +05:30 [DBG] SaveChanges starting for 'AuthDbContext'.
2025-12-16 15:05:44.815 +05:30 [DBG] DetectChanges starting for 'AuthDbContext'.
2025-12-16 15:05:44.836 +05:30 [DBG] DetectChanges completed for 'AuthDbContext'.
2025-12-16 15:05:44.891 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:05:44.894 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:05:44.897 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:05:44.899 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-16 15:05:44.903 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-16 15:05:44.906 +05:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 15:05:44.916 +05:30 [ERR] Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 15:05:44.925 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:05:44.928 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 15:05:44.950 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'EventTracker.Auth.Infrastructure.Persistence.AuthDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ProfilePictureUrl', table 'EventTracker_Auth.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0371726c-1a8a-43eb-985b-0ccc1678dbd5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ProfilePictureUrl', table 'EventTracker_Auth.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0371726c-1a8a-43eb-985b-0ccc1678dbd5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-16 15:05:44.967 +05:30 [ERR] Azure AD authentication failed: An error occurred while saving the entity changes. See the inner exception for details.
2025-12-16 15:05:44.969 +05:30 [ERR] Azure AD callback error: An error occurred while saving the entity changes. See the inner exception for details.
2025-12-16 15:05:44.973 +05:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-16 15:05:44.979 +05:30 [DBG] No information found on request to perform content negotiation.
2025-12-16 15:05:44.980 +05:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-16 15:05:44.982 +05:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-16 15:05:44.984 +05:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-16 15:05:44.987 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-16 15:05:45.000 +05:30 [INF] Executed action EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API) in 1254.1176ms
2025-12-16 15:05:45.002 +05:30 [INF] Executed endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:05:45.006 +05:30 [DBG] Connection id "0HNHSGPTUFBKU" completed keep alive response.
2025-12-16 15:05:45.009 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 15:05:45.013 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:05:45.015 +05:30 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-16 15:05:45.018 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - 401 null application/json; charset=utf-8 1378.8915ms
2025-12-16 15:07:07.903 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - null null
2025-12-16 15:07:07.906 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:07:07.908 +05:30 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-16 15:07:07.910 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:07:07.912 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:07:07.914 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:07:07.915 +05:30 [DBG] The request is a preflight request.
2025-12-16 15:07:07.916 +05:30 [DBG] Connection id "0HNHSGPTUFBKU" completed keep alive response.
2025-12-16 15:07:07.917 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - 204 null null 13.9246ms
2025-12-16 15:07:07.921 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - application/json 2648
2025-12-16 15:07:07.924 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:07:07.925 +05:30 [DBG] Endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)' with route pattern 'api/Auth/azure-ad-callback' is valid for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:07:07.928 +05:30 [DBG] Request matched endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:07:07.929 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:07:07.930 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:07:07.932 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:07:07.935 +05:30 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-16 15:07:07.936 +05:30 [INF] Executing endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:07:07.941 +05:30 [INF] Route matched with {action = "AzureAdCallback", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AzureAdCallback(EventTracker.Auth.Application.DTOs.AzureAdCallbackDto) on controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API).
2025-12-16 15:07:07.947 +05:30 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-16 15:07:07.949 +05:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-16 15:07:07.954 +05:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-16 15:07:07.959 +05:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-16 15:07:07.961 +05:30 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-16 15:07:07.963 +05:30 [DBG] Executing controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:07:07.967 +05:30 [DBG] Executed controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:07:07.969 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:07:07.971 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' using the name '' in request data ...
2025-12-16 15:07:07.973 +05:30 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-16 15:07:07.975 +05:30 [DBG] Connection id "0HNHSGPTUFBKU", Request id "0HNHSGPTUFBKU:00000004": started reading request body.
2025-12-16 15:07:07.977 +05:30 [DBG] Connection id "0HNHSGPTUFBKU", Request id "0HNHSGPTUFBKU:00000004": done reading request body.
2025-12-16 15:07:07.979 +05:30 [DBG] JSON input formatter succeeded, deserializing to type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'
2025-12-16 15:07:07.980 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:07:07.981 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:07:07.983 +05:30 [DBG] Attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:07:07.985 +05:30 [DBG] Done attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:07:07.986 +05:30 [INF] Azure AD callback received
2025-12-16 15:07:07.988 +05:30 [INF] Authenticating with Azure AD token
2025-12-16 15:07:07.989 +05:30 [INF] Azure AD user: harshgaikwadofficial@gmail.com (ID: fa6d8e40-ed52-44cf-8bd4-7efae237070d)
2025-12-16 15:07:08.084 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 15:07:08.093 +05:30 [DBG] Creating DbConnection.
2025-12-16 15:07:08.097 +05:30 [DBG] Created DbConnection. (4ms).
2025-12-16 15:07:08.099 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:08.102 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:08.104 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:07:08.106 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-16 15:07:08.108 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-16 15:07:08.110 +05:30 [DBG] Executing DbCommand [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:07:08.115 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:07:08.120 +05:30 [DBG] Closing data reader to 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:08.122 +05:30 [DBG] A data reader for 'EventTracker_Auth' on server '(local)' is being disposed after spending 2ms reading results.
2025-12-16 15:07:08.124 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:08.126 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (1ms).
2025-12-16 15:07:08.129 +05:30 [INF] Creating new user from Azure AD: harshgaikwadofficial@gmail.com
2025-12-16 15:07:08.131 +05:30 [DBG] Context 'AuthDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-16 15:07:08.133 +05:30 [DBG] SaveChanges starting for 'AuthDbContext'.
2025-12-16 15:07:08.135 +05:30 [DBG] DetectChanges starting for 'AuthDbContext'.
2025-12-16 15:07:08.137 +05:30 [DBG] DetectChanges completed for 'AuthDbContext'.
2025-12-16 15:07:08.139 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:08.141 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:08.143 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:07:08.144 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-16 15:07:08.145 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-16 15:07:08.147 +05:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 15:07:08.152 +05:30 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 15:07:08.156 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:08.158 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 15:07:08.163 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'EventTracker.Auth.Infrastructure.Persistence.AuthDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ProfilePictureUrl', table 'EventTracker_Auth.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0371726c-1a8a-43eb-985b-0ccc1678dbd5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ProfilePictureUrl', table 'EventTracker_Auth.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0371726c-1a8a-43eb-985b-0ccc1678dbd5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-16 15:07:08.180 +05:30 [ERR] Azure AD authentication failed: An error occurred while saving the entity changes. See the inner exception for details.
2025-12-16 15:07:08.182 +05:30 [ERR] Azure AD callback error: An error occurred while saving the entity changes. See the inner exception for details.
2025-12-16 15:07:08.184 +05:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-16 15:07:08.190 +05:30 [DBG] No information found on request to perform content negotiation.
2025-12-16 15:07:08.191 +05:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-16 15:07:08.193 +05:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-16 15:07:08.195 +05:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-16 15:07:08.198 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-16 15:07:08.202 +05:30 [INF] Executed action EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API) in 238.8414ms
2025-12-16 15:07:08.205 +05:30 [INF] Executed endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:07:08.208 +05:30 [DBG] Connection id "0HNHSGPTUFBKU" completed keep alive response.
2025-12-16 15:07:08.210 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 15:07:08.213 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:08.215 +05:30 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-16 15:07:08.218 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - 401 null application/json; charset=utf-8 297.7413ms
2025-12-16 15:07:22.020 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - null null
2025-12-16 15:07:22.023 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:07:22.025 +05:30 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-16 15:07:22.026 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:07:22.027 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:07:22.028 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:07:22.029 +05:30 [DBG] The request is a preflight request.
2025-12-16 15:07:22.030 +05:30 [DBG] Connection id "0HNHSGPTUFBKU" completed keep alive response.
2025-12-16 15:07:22.032 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - 204 null null 11.3179ms
2025-12-16 15:07:22.035 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - application/json 2653
2025-12-16 15:07:22.038 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:07:22.039 +05:30 [DBG] Endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)' with route pattern 'api/Auth/azure-ad-callback' is valid for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:07:22.042 +05:30 [DBG] Request matched endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:07:22.043 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:07:22.044 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:07:22.046 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:07:22.049 +05:30 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-16 15:07:22.051 +05:30 [INF] Executing endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:07:22.052 +05:30 [INF] Route matched with {action = "AzureAdCallback", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AzureAdCallback(EventTracker.Auth.Application.DTOs.AzureAdCallbackDto) on controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API).
2025-12-16 15:07:22.055 +05:30 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-16 15:07:22.056 +05:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-16 15:07:22.058 +05:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-16 15:07:22.060 +05:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-16 15:07:22.062 +05:30 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-16 15:07:22.064 +05:30 [DBG] Executing controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:07:22.068 +05:30 [DBG] Executed controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:07:22.070 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:07:22.071 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' using the name '' in request data ...
2025-12-16 15:07:22.073 +05:30 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-16 15:07:22.074 +05:30 [DBG] Connection id "0HNHSGPTUFBKU", Request id "0HNHSGPTUFBKU:00000006": started reading request body.
2025-12-16 15:07:22.076 +05:30 [DBG] Connection id "0HNHSGPTUFBKU", Request id "0HNHSGPTUFBKU:00000006": done reading request body.
2025-12-16 15:07:22.077 +05:30 [DBG] JSON input formatter succeeded, deserializing to type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'
2025-12-16 15:07:22.078 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:07:22.080 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:07:22.082 +05:30 [DBG] Attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:07:22.083 +05:30 [DBG] Done attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:07:22.084 +05:30 [INF] Azure AD callback received
2025-12-16 15:07:22.086 +05:30 [INF] Authenticating with Azure AD token
2025-12-16 15:07:22.087 +05:30 [INF] Azure AD user: harshgaikwadofficial@gmail.com (ID: fa6d8e40-ed52-44cf-8bd4-7efae237070d)
2025-12-16 15:07:22.089 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 15:07:22.092 +05:30 [DBG] Creating DbConnection.
2025-12-16 15:07:22.093 +05:30 [DBG] Created DbConnection. (1ms).
2025-12-16 15:07:22.095 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:22.097 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:22.099 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:07:22.101 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-16 15:07:22.103 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-16 15:07:22.105 +05:30 [DBG] Executing DbCommand [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:07:22.109 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:07:22.113 +05:30 [DBG] Closing data reader to 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:22.115 +05:30 [DBG] A data reader for 'EventTracker_Auth' on server '(local)' is being disposed after spending 2ms reading results.
2025-12-16 15:07:22.118 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:22.121 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 15:07:22.123 +05:30 [INF] Creating new user from Azure AD: harshgaikwadofficial@gmail.com
2025-12-16 15:07:22.125 +05:30 [DBG] Context 'AuthDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-16 15:07:22.128 +05:30 [DBG] SaveChanges starting for 'AuthDbContext'.
2025-12-16 15:07:22.130 +05:30 [DBG] DetectChanges starting for 'AuthDbContext'.
2025-12-16 15:07:22.132 +05:30 [DBG] DetectChanges completed for 'AuthDbContext'.
2025-12-16 15:07:22.134 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:22.136 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:22.139 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:07:22.140 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-16 15:07:22.142 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-16 15:07:22.144 +05:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 15:07:22.149 +05:30 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 15:07:22.152 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:22.155 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 15:07:22.158 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'EventTracker.Auth.Infrastructure.Persistence.AuthDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ProfilePictureUrl', table 'EventTracker_Auth.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0371726c-1a8a-43eb-985b-0ccc1678dbd5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ProfilePictureUrl', table 'EventTracker_Auth.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0371726c-1a8a-43eb-985b-0ccc1678dbd5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-16 15:07:22.170 +05:30 [ERR] Azure AD authentication failed: An error occurred while saving the entity changes. See the inner exception for details.
2025-12-16 15:07:22.171 +05:30 [ERR] Azure AD callback error: An error occurred while saving the entity changes. See the inner exception for details.
2025-12-16 15:07:22.173 +05:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-16 15:07:22.176 +05:30 [DBG] No information found on request to perform content negotiation.
2025-12-16 15:07:22.177 +05:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-16 15:07:22.179 +05:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-16 15:07:22.180 +05:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-16 15:07:22.182 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-16 15:07:22.184 +05:30 [INF] Executed action EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API) in 120.757ms
2025-12-16 15:07:22.187 +05:30 [INF] Executed endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:07:22.188 +05:30 [DBG] Connection id "0HNHSGPTUFBKU" completed keep alive response.
2025-12-16 15:07:22.191 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 15:07:22.192 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:07:22.194 +05:30 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-16 15:07:22.196 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - 401 null application/json; charset=utf-8 161.1007ms
2025-12-16 15:08:52.320 +05:30 [INF] Application is shutting down...
2025-12-16 15:08:52.323 +05:30 [DBG] Hosting stopping
2025-12-16 15:08:52.332 +05:30 [DBG] Connection id "0HNHSGPTUFBKU" disconnecting.
2025-12-16 15:08:52.335 +05:30 [DBG] Connection id "0HNHSGPTUFBKU" stopped.
2025-12-16 15:08:52.337 +05:30 [DBG] Connection id "0HNHSGPTUFBKU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-16 15:08:52.340 +05:30 [DBG] Hosting stopped
2025-12-16 15:09:03.827 +05:30 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-16 15:09:04.323 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 15:09:04.342 +05:30 [DBG] Creating DbConnection.
2025-12-16 15:09:04.373 +05:30 [DBG] Created DbConnection. (28ms).
2025-12-16 15:09:04.380 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:04.554 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:04.558 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 15:09:04.564 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2025-12-16 15:09:04.567 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (9ms).
2025-12-16 15:09:04.574 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 15:09:04.593 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 15:09:04.596 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:04.605 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (5ms).
2025-12-16 15:09:04.609 +05:30 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-16 15:09:04.610 +05:30 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-12-16 15:09:04.611 +05:30 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-12-16 15:09:04.612 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:04.613 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:04.615 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 15:09:04.627 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 15:09:04.629 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:04.631 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (1ms).
2025-12-16 15:09:04.634 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 15:09:04.637 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:04.639 +05:30 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-16 15:09:04.677 +05:30 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-16 15:09:04.713 +05:30 [DBG] Hosting starting
2025-12-16 15:09:04.724 +05:30 [INF] User profile is available. Using 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-16 15:09:04.732 +05:30 [DBG] Reading data from file 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys\key-0f9824b6-b006-44d6-96a0-7f00dad5e3f2.xml'.
2025-12-16 15:09:04.737 +05:30 [DBG] Found key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2}.
2025-12-16 15:09:04.745 +05:30 [DBG] Considering key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} with expiration date 2026-03-11 06:25:41Z as default key.
2025-12-16 15:09:04.748 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 15:09:04.750 +05:30 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-16 15:09:04.752 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 15:09:04.755 +05:30 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-16 15:09:04.757 +05:30 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-16 15:09:04.759 +05:30 [DBG] Using key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} as the default key.
2025-12-16 15:09:04.761 +05:30 [DBG] Key ring with default key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} was loaded during application startup.
2025-12-16 15:09:04.791 +05:30 [INF] Now listening on: http://localhost:5085
2025-12-16 15:09:04.792 +05:30 [DBG] Loaded hosting startup assembly EventTracker.Auth.API
2025-12-16 15:09:04.793 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-12-16 15:09:04.794 +05:30 [INF] Hosting environment: Development
2025-12-16 15:09:04.795 +05:30 [INF] Content root path: C:\Users\w199615\OneDrive - Worldline SA\Projects\event-tracking-tool\src\Services\EventTracker.Auth\EventTracker.Auth.API
2025-12-16 15:09:04.796 +05:30 [DBG] Hosting started
2025-12-16 15:09:28.127 +05:30 [DBG] Connection id "0HNHSGS0SE94I" accepted.
2025-12-16 15:09:28.129 +05:30 [DBG] Connection id "0HNHSGS0SE94I" started.
2025-12-16 15:09:28.160 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - null null
2025-12-16 15:09:28.165 +05:30 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-16 15:09:28.186 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:09:28.189 +05:30 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-16 15:09:28.203 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:09:28.205 +05:30 [WRN] Failed to determine the https port for redirect.
2025-12-16 15:09:28.207 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:09:28.210 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:09:28.217 +05:30 [DBG] The request is a preflight request.
2025-12-16 15:09:28.239 +05:30 [DBG] Connection id "0HNHSGS0SE94I" completed keep alive response.
2025-12-16 15:09:28.242 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - 204 null null 83.6161ms
2025-12-16 15:09:28.248 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - application/json 2648
2025-12-16 15:09:28.253 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:09:28.257 +05:30 [DBG] Endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)' with route pattern 'api/Auth/azure-ad-callback' is valid for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:09:28.260 +05:30 [DBG] Request matched endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:09:28.263 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:09:28.265 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:09:28.267 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:09:28.314 +05:30 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-16 15:09:28.317 +05:30 [INF] Executing endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:09:28.340 +05:30 [INF] Route matched with {action = "AzureAdCallback", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AzureAdCallback(EventTracker.Auth.Application.DTOs.AzureAdCallbackDto) on controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API).
2025-12-16 15:09:28.344 +05:30 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-16 15:09:28.346 +05:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-16 15:09:28.349 +05:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-16 15:09:28.352 +05:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-16 15:09:28.354 +05:30 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-16 15:09:28.358 +05:30 [DBG] Executing controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:09:28.456 +05:30 [DBG] Executed controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:09:28.462 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:09:28.467 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' using the name '' in request data ...
2025-12-16 15:09:28.471 +05:30 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-16 15:09:28.488 +05:30 [DBG] Connection id "0HNHSGS0SE94I", Request id "0HNHSGS0SE94I:00000002": started reading request body.
2025-12-16 15:09:28.490 +05:30 [DBG] Connection id "0HNHSGS0SE94I", Request id "0HNHSGS0SE94I:00000002": done reading request body.
2025-12-16 15:09:28.499 +05:30 [DBG] JSON input formatter succeeded, deserializing to type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'
2025-12-16 15:09:28.501 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:09:28.504 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:09:28.506 +05:30 [DBG] Attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:09:28.515 +05:30 [DBG] Done attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:09:28.522 +05:30 [INF] Azure AD callback received
2025-12-16 15:09:28.527 +05:30 [INF] Authenticating with Azure AD token
2025-12-16 15:09:28.561 +05:30 [INF] Azure AD user: harshgaikwadofficial@gmail.com (ID: fa6d8e40-ed52-44cf-8bd4-7efae237070d)
2025-12-16 15:09:28.589 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 15:09:28.664 +05:30 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Profiles)
    .FirstOrDefault(u => u.AzureAdId == __azureAdId_0)'
2025-12-16 15:09:28.729 +05:30 [DBG] Including navigation: 'User.Profiles'.
2025-12-16 15:09:29.243 +05:30 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AzureAdId (string) Index, 1], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: User.Email (string) Required Index, 3], [Property: User.FirstName (string) Required, 4], [Property: User.IsActive (bool) Required, 5], [Property: User.LastLoginAt (DateTime?), 6], [Property: User.LastName (string) Required, 7], [Property: User.ProfilePictureUrl (string), 8], [Property: User.Role (UserRole) Required, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserProfile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: UserProfile.Bio (string) Required, 12], [Property: UserProfile.Company (string) Required, 13], [Property: UserProfile.Country (string) Required, 14], [Property: UserProfile.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: UserProfile.JobTitle (string) Required, 16], [Property: UserProfile.PhoneNumber (string) Required, 17], [Property: UserProfile.UpdatedAt (DateTime?), 18], [Property: UserProfile.UserId (Guid) Required FK Index, 19] }
                3 -> 11
            SELECT t.Id, t.AzureAdId, t.CreatedAt, t.Email, t.FirstName, t.IsActive, t.LastLoginAt, t.LastName, t.ProfilePictureUrl, t.Role, t.UpdatedAt, u0.Id, u0.Bio, u0.Company, u0.Country, u0.CreatedAt, u0.JobTitle, u0.PhoneNumber, u0.UpdatedAt, u0.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AzureAdId, u.CreatedAt, u.Email, u.FirstName, u.IsActive, u.LastLoginAt, u.LastName, u.ProfilePictureUrl, u.Role, u.UpdatedAt
                FROM Users AS u
                WHERE u.AzureAdId == @__azureAdId_0
            ) AS t
            LEFT JOIN UserProfiles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        EventTracker.Auth.Infrastructure.Persistence.AuthDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-16 15:09:29.308 +05:30 [DBG] Creating DbConnection.
2025-12-16 15:09:29.311 +05:30 [DBG] Created DbConnection. (2ms).
2025-12-16 15:09:29.316 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:29.322 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:29.325 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:09:29.327 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-16 15:09:29.335 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-12-16 15:09:29.342 +05:30 [DBG] Executing DbCommand [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:09:29.389 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:09:29.412 +05:30 [DBG] Closing data reader to 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:29.419 +05:30 [DBG] A data reader for 'EventTracker_Auth' on server '(local)' is being disposed after spending 21ms reading results.
2025-12-16 15:09:29.424 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:29.428 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (3ms).
2025-12-16 15:09:29.432 +05:30 [INF] Creating new user from Azure AD: harshgaikwadofficial@gmail.com
2025-12-16 15:09:29.553 +05:30 [DBG] Context 'AuthDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-16 15:09:29.561 +05:30 [DBG] SaveChanges starting for 'AuthDbContext'.
2025-12-16 15:09:29.566 +05:30 [DBG] DetectChanges starting for 'AuthDbContext'.
2025-12-16 15:09:29.599 +05:30 [DBG] DetectChanges completed for 'AuthDbContext'.
2025-12-16 15:09:29.687 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:29.690 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:29.696 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:09:29.699 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-16 15:09:29.704 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-12-16 15:09:29.708 +05:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 15:09:29.721 +05:30 [ERR] Failed executing DbCommand (13ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 15:09:29.729 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:29.732 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 15:09:29.758 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'EventTracker.Auth.Infrastructure.Persistence.AuthDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ProfilePictureUrl', table 'EventTracker_Auth.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:34527e8f-ae98-482c-b81b-036372f43c03
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ProfilePictureUrl', table 'EventTracker_Auth.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:34527e8f-ae98-482c-b81b-036372f43c03
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-16 15:09:29.777 +05:30 [ERR] Azure AD authentication failed: An error occurred while saving the entity changes. See the inner exception for details.
2025-12-16 15:09:29.780 +05:30 [ERR] Azure AD callback error: An error occurred while saving the entity changes. See the inner exception for details.
2025-12-16 15:09:29.787 +05:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-16 15:09:29.795 +05:30 [DBG] No information found on request to perform content negotiation.
2025-12-16 15:09:29.797 +05:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-16 15:09:29.799 +05:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-16 15:09:29.802 +05:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-16 15:09:29.806 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-16 15:09:29.825 +05:30 [INF] Executed action EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API) in 1463.9539ms
2025-12-16 15:09:29.830 +05:30 [INF] Executed endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:09:29.835 +05:30 [DBG] Connection id "0HNHSGS0SE94I" completed keep alive response.
2025-12-16 15:09:29.839 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 15:09:29.844 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:09:29.847 +05:30 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-16 15:09:29.850 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - 401 null application/json; charset=utf-8 1601.7253ms
2025-12-16 15:11:40.843 +05:30 [DBG] Connection id "0HNHSGS0SE94I" disconnecting.
2025-12-16 15:11:40.846 +05:30 [DBG] Connection id "0HNHSGS0SE94I" stopped.
2025-12-16 15:11:40.848 +05:30 [DBG] Connection id "0HNHSGS0SE94I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-16 15:21:59.698 +05:30 [INF] Application is shutting down...
2025-12-16 15:21:59.699 +05:30 [DBG] Hosting stopping
2025-12-16 15:21:59.707 +05:30 [DBG] Hosting stopped
2025-12-16 15:23:13.888 +05:30 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-16 15:23:14.349 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 15:23:14.364 +05:30 [DBG] Creating DbConnection.
2025-12-16 15:23:14.392 +05:30 [DBG] Created DbConnection. (26ms).
2025-12-16 15:23:14.399 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:14.541 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:14.547 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 15:23:14.553 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (5ms).
2025-12-16 15:23:14.556 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (10ms).
2025-12-16 15:23:14.563 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 15:23:14.584 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 15:23:14.588 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:14.595 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (4ms).
2025-12-16 15:23:14.599 +05:30 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-16 15:23:14.600 +05:30 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-12-16 15:23:14.601 +05:30 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-12-16 15:23:14.602 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:14.605 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:14.607 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 15:23:14.620 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 15:23:14.623 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:14.625 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 15:23:14.628 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 15:23:14.631 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:14.633 +05:30 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-16 15:23:14.663 +05:30 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-16 15:23:14.693 +05:30 [DBG] Hosting starting
2025-12-16 15:23:14.701 +05:30 [INF] User profile is available. Using 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-16 15:23:14.708 +05:30 [DBG] Reading data from file 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys\key-0f9824b6-b006-44d6-96a0-7f00dad5e3f2.xml'.
2025-12-16 15:23:14.712 +05:30 [DBG] Found key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2}.
2025-12-16 15:23:14.718 +05:30 [DBG] Considering key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} with expiration date 2026-03-11 06:25:41Z as default key.
2025-12-16 15:23:14.721 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 15:23:14.722 +05:30 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-16 15:23:14.724 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 15:23:14.727 +05:30 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-16 15:23:14.728 +05:30 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-16 15:23:14.730 +05:30 [DBG] Using key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} as the default key.
2025-12-16 15:23:14.731 +05:30 [DBG] Key ring with default key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} was loaded during application startup.
2025-12-16 15:23:14.759 +05:30 [INF] Now listening on: http://localhost:5085
2025-12-16 15:23:14.760 +05:30 [DBG] Loaded hosting startup assembly EventTracker.Auth.API
2025-12-16 15:23:14.762 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-12-16 15:23:14.763 +05:30 [INF] Hosting environment: Development
2025-12-16 15:23:14.764 +05:30 [INF] Content root path: C:\Users\w199615\OneDrive - Worldline SA\Projects\event-tracking-tool\src\Services\EventTracker.Auth\EventTracker.Auth.API
2025-12-16 15:23:14.765 +05:30 [DBG] Hosting started
2025-12-16 15:23:51.451 +05:30 [DBG] Connection id "0HNHSH425NU4A" accepted.
2025-12-16 15:23:51.453 +05:30 [DBG] Connection id "0HNHSH425NU4A" started.
2025-12-16 15:23:51.478 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - null null
2025-12-16 15:23:51.483 +05:30 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-16 15:23:51.500 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:23:51.503 +05:30 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-16 15:23:51.514 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:23:51.516 +05:30 [WRN] Failed to determine the https port for redirect.
2025-12-16 15:23:51.519 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:23:51.521 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:23:51.523 +05:30 [DBG] The request is a preflight request.
2025-12-16 15:23:51.527 +05:30 [DBG] Connection id "0HNHSH425NU4A" completed keep alive response.
2025-12-16 15:23:51.531 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - 204 null null 54.4238ms
2025-12-16 15:23:51.539 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - application/json 2656
2025-12-16 15:23:51.546 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:23:51.551 +05:30 [DBG] Endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)' with route pattern 'api/Auth/azure-ad-callback' is valid for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:23:51.554 +05:30 [DBG] Request matched endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:23:51.557 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:23:51.558 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:23:51.560 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:23:51.596 +05:30 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-16 15:23:51.601 +05:30 [INF] Executing endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:23:51.634 +05:30 [INF] Route matched with {action = "AzureAdCallback", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AzureAdCallback(EventTracker.Auth.Application.DTOs.AzureAdCallbackDto) on controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API).
2025-12-16 15:23:51.641 +05:30 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-16 15:23:51.646 +05:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-16 15:23:51.653 +05:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-16 15:23:51.659 +05:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-16 15:23:51.665 +05:30 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-16 15:23:51.671 +05:30 [DBG] Executing controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:23:51.767 +05:30 [DBG] Executed controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:23:51.772 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:23:51.777 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' using the name '' in request data ...
2025-12-16 15:23:51.781 +05:30 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-16 15:23:51.795 +05:30 [DBG] Connection id "0HNHSH425NU4A", Request id "0HNHSH425NU4A:00000002": started reading request body.
2025-12-16 15:23:51.798 +05:30 [DBG] Connection id "0HNHSH425NU4A", Request id "0HNHSH425NU4A:00000002": done reading request body.
2025-12-16 15:23:51.804 +05:30 [DBG] JSON input formatter succeeded, deserializing to type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'
2025-12-16 15:23:51.806 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:23:51.809 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:23:51.811 +05:30 [DBG] Attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:23:51.819 +05:30 [DBG] Done attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:23:51.824 +05:30 [INF] Azure AD callback received
2025-12-16 15:23:51.828 +05:30 [INF] Authenticating with Azure AD token
2025-12-16 15:23:51.852 +05:30 [INF] Azure AD user: harshgaikwadofficial@gmail.com (ID: fa6d8e40-ed52-44cf-8bd4-7efae237070d)
2025-12-16 15:23:51.873 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 15:23:51.931 +05:30 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Profiles)
    .FirstOrDefault(u => u.AzureAdId == __azureAdId_0)'
2025-12-16 15:23:51.981 +05:30 [DBG] Including navigation: 'User.Profiles'.
2025-12-16 15:23:52.211 +05:30 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AzureAdId (string) Index, 1], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: User.Email (string) Index, 3], [Property: User.FirstName (string), 4], [Property: User.IsActive (bool) Required, 5], [Property: User.LastLoginAt (DateTime?), 6], [Property: User.LastName (string), 7], [Property: User.ProfilePictureUrl (string), 8], [Property: User.Role (UserRole) Required, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserProfile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: UserProfile.Bio (string) Required, 12], [Property: UserProfile.Company (string) Required, 13], [Property: UserProfile.Country (string) Required, 14], [Property: UserProfile.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: UserProfile.JobTitle (string) Required, 16], [Property: UserProfile.PhoneNumber (string) Required, 17], [Property: UserProfile.UpdatedAt (DateTime?), 18], [Property: UserProfile.UserId (Guid) Required FK Index, 19] }
                3 -> 11
            SELECT t.Id, t.AzureAdId, t.CreatedAt, t.Email, t.FirstName, t.IsActive, t.LastLoginAt, t.LastName, t.ProfilePictureUrl, t.Role, t.UpdatedAt, u0.Id, u0.Bio, u0.Company, u0.Country, u0.CreatedAt, u0.JobTitle, u0.PhoneNumber, u0.UpdatedAt, u0.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AzureAdId, u.CreatedAt, u.Email, u.FirstName, u.IsActive, u.LastLoginAt, u.LastName, u.ProfilePictureUrl, u.Role, u.UpdatedAt
                FROM Users AS u
                WHERE u.AzureAdId == @__azureAdId_0
            ) AS t
            LEFT JOIN UserProfiles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        EventTracker.Auth.Infrastructure.Persistence.AuthDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-16 15:23:52.254 +05:30 [DBG] Creating DbConnection.
2025-12-16 15:23:52.256 +05:30 [DBG] Created DbConnection. (2ms).
2025-12-16 15:23:52.260 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:52.263 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:52.266 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:23:52.267 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-16 15:23:52.272 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-12-16 15:23:52.277 +05:30 [DBG] Executing DbCommand [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:23:52.303 +05:30 [INF] Executed DbCommand (28ms) [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:23:52.317 +05:30 [DBG] Closing data reader to 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:52.321 +05:30 [DBG] A data reader for 'EventTracker_Auth' on server '(local)' is being disposed after spending 13ms reading results.
2025-12-16 15:23:52.324 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:52.326 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 15:23:52.329 +05:30 [INF] Creating new user from Azure AD: harshgaikwadofficial@gmail.com
2025-12-16 15:23:52.403 +05:30 [DBG] Context 'AuthDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-16 15:23:52.408 +05:30 [DBG] SaveChanges starting for 'AuthDbContext'.
2025-12-16 15:23:52.412 +05:30 [DBG] DetectChanges starting for 'AuthDbContext'.
2025-12-16 15:23:52.435 +05:30 [DBG] DetectChanges completed for 'AuthDbContext'.
2025-12-16 15:23:52.495 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:52.498 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:52.502 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:23:52.504 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-16 15:23:52.508 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-16 15:23:52.510 +05:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 15:23:52.520 +05:30 [ERR] Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 15:23:52.527 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:52.529 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (1ms).
2025-12-16 15:23:52.548 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'EventTracker.Auth.Infrastructure.Persistence.AuthDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ProfilePictureUrl', table 'EventTracker_Auth.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4d296a48-2474-48be-b5b0-79bf305f5bda
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ProfilePictureUrl', table 'EventTracker_Auth.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4d296a48-2474-48be-b5b0-79bf305f5bda
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-16 15:23:52.560 +05:30 [ERR] Azure AD authentication failed: An error occurred while saving the entity changes. See the inner exception for details.
2025-12-16 15:23:52.562 +05:30 [ERR] Azure AD callback error: An error occurred while saving the entity changes. See the inner exception for details.
2025-12-16 15:23:52.567 +05:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-16 15:23:52.572 +05:30 [DBG] No information found on request to perform content negotiation.
2025-12-16 15:23:52.574 +05:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-16 15:23:52.575 +05:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-16 15:23:52.577 +05:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-16 15:23:52.579 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-16 15:23:52.589 +05:30 [INF] Executed action EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API) in 917.3942ms
2025-12-16 15:23:52.592 +05:30 [INF] Executed endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:23:52.595 +05:30 [DBG] Connection id "0HNHSH425NU4A" completed keep alive response.
2025-12-16 15:23:52.598 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 15:23:52.602 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:23:52.604 +05:30 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-16 15:23:52.607 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - 401 null application/json; charset=utf-8 1067.0792ms
2025-12-16 15:25:13.458 +05:30 [INF] Application is shutting down...
2025-12-16 15:25:13.461 +05:30 [DBG] Hosting stopping
2025-12-16 15:25:13.475 +05:30 [DBG] Connection id "0HNHSH425NU4A" disconnecting.
2025-12-16 15:25:13.479 +05:30 [DBG] Connection id "0HNHSH425NU4A" stopped.
2025-12-16 15:25:13.481 +05:30 [DBG] Connection id "0HNHSH425NU4A" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-16 15:25:13.486 +05:30 [DBG] Hosting stopped
2025-12-16 15:27:37.250 +05:30 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in C:\Users\w199615\OneDrive - Worldline SA\Projects\event-tracking-tool\src\Services\EventTracker.Auth\EventTracker.Auth.API\Program.cs:line 98
2025-12-16 15:27:49.948 +05:30 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in C:\Users\w199615\OneDrive - Worldline SA\Projects\event-tracking-tool\src\Services\EventTracker.Auth\EventTracker.Auth.API\Program.cs:line 98
2025-12-16 15:33:59.891 +05:30 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in C:\Users\w199615\OneDrive - Worldline SA\Projects\event-tracking-tool\src\Services\EventTracker.Auth\EventTracker.Auth.API\Program.cs:line 98
2025-12-16 15:34:51.939 +05:30 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-16 15:34:52.424 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 15:34:52.439 +05:30 [DBG] Creating DbConnection.
2025-12-16 15:34:52.472 +05:30 [DBG] Created DbConnection. (31ms).
2025-12-16 15:34:52.478 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:34:52.620 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:34:52.625 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 15:34:52.632 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2025-12-16 15:34:52.634 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (9ms).
2025-12-16 15:34:52.640 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 15:34:52.659 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 15:34:52.664 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:34:52.670 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (4ms).
2025-12-16 15:34:52.673 +05:30 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-16 15:34:52.674 +05:30 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-12-16 15:34:52.675 +05:30 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-12-16 15:34:52.676 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:34:52.678 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:34:52.680 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 15:34:52.726 +05:30 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 15:34:52.730 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:34:52.731 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (1ms).
2025-12-16 15:34:52.734 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 15:34:52.737 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:34:52.738 +05:30 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-16 15:34:52.769 +05:30 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-16 15:34:52.811 +05:30 [DBG] Hosting starting
2025-12-16 15:34:52.821 +05:30 [INF] User profile is available. Using 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-16 15:34:52.829 +05:30 [DBG] Reading data from file 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys\key-0f9824b6-b006-44d6-96a0-7f00dad5e3f2.xml'.
2025-12-16 15:34:52.835 +05:30 [DBG] Found key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2}.
2025-12-16 15:34:52.841 +05:30 [DBG] Considering key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} with expiration date 2026-03-11 06:25:41Z as default key.
2025-12-16 15:34:52.844 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 15:34:52.846 +05:30 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-16 15:34:52.848 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 15:34:52.854 +05:30 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-16 15:34:52.856 +05:30 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-16 15:34:52.861 +05:30 [DBG] Using key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} as the default key.
2025-12-16 15:34:52.864 +05:30 [DBG] Key ring with default key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} was loaded during application startup.
2025-12-16 15:34:52.899 +05:30 [INF] Now listening on: http://localhost:5085
2025-12-16 15:34:52.900 +05:30 [DBG] Loaded hosting startup assembly EventTracker.Auth.API
2025-12-16 15:34:52.901 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-12-16 15:34:52.902 +05:30 [INF] Hosting environment: Development
2025-12-16 15:34:52.903 +05:30 [INF] Content root path: C:\Users\w199615\OneDrive - Worldline SA\Projects\event-tracking-tool\src\Services\EventTracker.Auth\EventTracker.Auth.API
2025-12-16 15:34:52.904 +05:30 [DBG] Hosting started
2025-12-16 15:36:10.048 +05:30 [DBG] Connection id "0HNHSHAU9HSBP" accepted.
2025-12-16 15:36:10.051 +05:30 [DBG] Connection id "0HNHSHAU9HSBP" started.
2025-12-16 15:36:10.075 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - null null
2025-12-16 15:36:10.080 +05:30 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-16 15:36:10.101 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:36:10.104 +05:30 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-16 15:36:10.114 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:36:10.116 +05:30 [WRN] Failed to determine the https port for redirect.
2025-12-16 15:36:10.118 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:36:10.120 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:36:10.122 +05:30 [DBG] The request is a preflight request.
2025-12-16 15:36:10.126 +05:30 [DBG] Connection id "0HNHSHAU9HSBP" completed keep alive response.
2025-12-16 15:36:10.129 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - 204 null null 54.9591ms
2025-12-16 15:36:10.136 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - application/json 2649
2025-12-16 15:36:10.143 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:36:10.148 +05:30 [DBG] Endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)' with route pattern 'api/Auth/azure-ad-callback' is valid for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:36:10.152 +05:30 [DBG] Request matched endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:36:10.156 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:36:10.159 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:36:10.162 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:36:10.222 +05:30 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-16 15:36:10.227 +05:30 [INF] Executing endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:36:10.256 +05:30 [INF] Route matched with {action = "AzureAdCallback", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AzureAdCallback(EventTracker.Auth.Application.DTOs.AzureAdCallbackDto) on controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API).
2025-12-16 15:36:10.264 +05:30 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-16 15:36:10.268 +05:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-16 15:36:10.272 +05:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-16 15:36:10.276 +05:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-16 15:36:10.280 +05:30 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-16 15:36:10.286 +05:30 [DBG] Executing controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:36:10.401 +05:30 [DBG] Executed controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:36:10.408 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:36:10.414 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' using the name '' in request data ...
2025-12-16 15:36:10.419 +05:30 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-16 15:36:10.440 +05:30 [DBG] Connection id "0HNHSHAU9HSBP", Request id "0HNHSHAU9HSBP:00000002": started reading request body.
2025-12-16 15:36:10.443 +05:30 [DBG] Connection id "0HNHSHAU9HSBP", Request id "0HNHSHAU9HSBP:00000002": done reading request body.
2025-12-16 15:36:10.453 +05:30 [DBG] JSON input formatter succeeded, deserializing to type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'
2025-12-16 15:36:10.456 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:36:10.459 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:36:10.462 +05:30 [DBG] Attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:36:10.473 +05:30 [DBG] Done attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:36:10.479 +05:30 [INF] Azure AD callback received
2025-12-16 15:36:10.483 +05:30 [INF] Authenticating with Azure AD token
2025-12-16 15:36:10.512 +05:30 [INF] Azure AD user: harshgaikwadofficial@gmail.com (ID: fa6d8e40-ed52-44cf-8bd4-7efae237070d)
2025-12-16 15:36:10.536 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 15:36:10.602 +05:30 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Profiles)
    .FirstOrDefault(u => u.AzureAdId == __azureAdId_0)'
2025-12-16 15:36:10.675 +05:30 [DBG] Including navigation: 'User.Profiles'.
2025-12-16 15:36:10.983 +05:30 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AzureAdId (string) Index, 1], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: User.Email (string) Index, 3], [Property: User.FirstName (string), 4], [Property: User.IsActive (bool) Required, 5], [Property: User.LastLoginAt (DateTime?), 6], [Property: User.LastName (string), 7], [Property: User.ProfilePictureUrl (string), 8], [Property: User.Role (UserRole) Required, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserProfile.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: UserProfile.Bio (string) Required, 12], [Property: UserProfile.Company (string) Required, 13], [Property: UserProfile.Country (string) Required, 14], [Property: UserProfile.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: UserProfile.JobTitle (string) Required, 16], [Property: UserProfile.PhoneNumber (string) Required, 17], [Property: UserProfile.UpdatedAt (DateTime?), 18], [Property: UserProfile.UserId (Guid) Required FK Index, 19] }
                3 -> 11
            SELECT t.Id, t.AzureAdId, t.CreatedAt, t.Email, t.FirstName, t.IsActive, t.LastLoginAt, t.LastName, t.ProfilePictureUrl, t.Role, t.UpdatedAt, u0.Id, u0.Bio, u0.Company, u0.Country, u0.CreatedAt, u0.JobTitle, u0.PhoneNumber, u0.UpdatedAt, u0.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AzureAdId, u.CreatedAt, u.Email, u.FirstName, u.IsActive, u.LastLoginAt, u.LastName, u.ProfilePictureUrl, u.Role, u.UpdatedAt
                FROM Users AS u
                WHERE u.AzureAdId == @__azureAdId_0
            ) AS t
            LEFT JOIN UserProfiles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        EventTracker.Auth.Infrastructure.Persistence.AuthDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-16 15:36:11.036 +05:30 [DBG] Creating DbConnection.
2025-12-16 15:36:11.038 +05:30 [DBG] Created DbConnection. (2ms).
2025-12-16 15:36:11.041 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:11.046 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:11.048 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:36:11.050 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-16 15:36:11.057 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-12-16 15:36:11.063 +05:30 [DBG] Executing DbCommand [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:36:11.099 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:36:11.113 +05:30 [DBG] Closing data reader to 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:11.118 +05:30 [DBG] A data reader for 'EventTracker_Auth' on server '(local)' is being disposed after spending 13ms reading results.
2025-12-16 15:36:11.124 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:11.126 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 15:36:11.130 +05:30 [INF] Creating new user from Azure AD: harshgaikwadofficial@gmail.com
2025-12-16 15:36:11.209 +05:30 [DBG] Context 'AuthDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-16 15:36:11.215 +05:30 [DBG] SaveChanges starting for 'AuthDbContext'.
2025-12-16 15:36:11.219 +05:30 [DBG] DetectChanges starting for 'AuthDbContext'.
2025-12-16 15:36:11.241 +05:30 [DBG] DetectChanges completed for 'AuthDbContext'.
2025-12-16 15:36:11.303 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:11.306 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:11.311 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:36:11.312 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-16 15:36:11.317 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-16 15:36:11.320 +05:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 15:36:11.328 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 450), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AzureAdId], [CreatedAt], [Email], [FirstName], [IsActive], [LastLoginAt], [LastName], [ProfilePictureUrl], [Role], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-12-16 15:36:11.334 +05:30 [DBG] Closing data reader to 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:11.336 +05:30 [DBG] A data reader for 'EventTracker_Auth' on server '(local)' is being disposed after spending 4ms reading results.
2025-12-16 15:36:11.339 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:11.341 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 15:36:11.352 +05:30 [DBG] An entity of type 'User' tracked by 'AuthDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-16 15:36:11.356 +05:30 [DBG] SaveChanges completed for 'AuthDbContext' with 1 entities written to the database.
2025-12-16 15:36:11.363 +05:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-16 15:36:11.369 +05:30 [DBG] No information found on request to perform content negotiation.
2025-12-16 15:36:11.370 +05:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-16 15:36:11.372 +05:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-16 15:36:11.374 +05:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-16 15:36:11.377 +05:30 [INF] Executing OkObjectResult, writing value of type 'EventTracker.Auth.Application.DTOs.LoginResponseDto'.
2025-12-16 15:36:11.397 +05:30 [INF] Executed action EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API) in 1110.9317ms
2025-12-16 15:36:11.400 +05:30 [INF] Executed endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:36:11.404 +05:30 [DBG] Connection id "0HNHSHAU9HSBP" completed keep alive response.
2025-12-16 15:36:11.408 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 15:36:11.412 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:11.414 +05:30 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-16 15:36:11.417 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - 200 null application/json; charset=utf-8 1280.3444ms
2025-12-16 15:36:32.412 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - null null
2025-12-16 15:36:32.415 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:36:32.416 +05:30 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-16 15:36:32.419 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:36:32.420 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:36:32.422 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:36:32.422 +05:30 [DBG] The request is a preflight request.
2025-12-16 15:36:32.423 +05:30 [DBG] Connection id "0HNHSHAU9HSBP" completed keep alive response.
2025-12-16 15:36:32.425 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5085/api/auth/azure-ad-callback - 204 null null 12.8443ms
2025-12-16 15:36:32.428 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - application/json 2652
2025-12-16 15:36:32.431 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:36:32.433 +05:30 [DBG] Endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)' with route pattern 'api/Auth/azure-ad-callback' is valid for the request path '/api/auth/azure-ad-callback'
2025-12-16 15:36:32.435 +05:30 [DBG] Request matched endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:36:32.437 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 15:36:32.438 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 15:36:32.439 +05:30 [INF] CORS policy execution successful.
2025-12-16 15:36:32.442 +05:30 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-16 15:36:32.443 +05:30 [INF] Executing endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:36:32.444 +05:30 [INF] Route matched with {action = "AzureAdCallback", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AzureAdCallback(EventTracker.Auth.Application.DTOs.AzureAdCallbackDto) on controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API).
2025-12-16 15:36:32.446 +05:30 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-16 15:36:32.448 +05:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-16 15:36:32.451 +05:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-16 15:36:32.453 +05:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-16 15:36:32.455 +05:30 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-16 15:36:32.456 +05:30 [DBG] Executing controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:36:32.459 +05:30 [DBG] Executed controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 15:36:32.461 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:36:32.463 +05:30 [DBG] Attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' using the name '' in request data ...
2025-12-16 15:36:32.465 +05:30 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-16 15:36:32.467 +05:30 [DBG] Connection id "0HNHSHAU9HSBP", Request id "0HNHSHAU9HSBP:00000004": started reading request body.
2025-12-16 15:36:32.468 +05:30 [DBG] Connection id "0HNHSHAU9HSBP", Request id "0HNHSHAU9HSBP:00000004": done reading request body.
2025-12-16 15:36:32.470 +05:30 [DBG] JSON input formatter succeeded, deserializing to type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'
2025-12-16 15:36:32.471 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:36:32.473 +05:30 [DBG] Done attempting to bind parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:36:32.474 +05:30 [DBG] Attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto' ...
2025-12-16 15:36:32.476 +05:30 [DBG] Done attempting to validate the bound parameter 'request' of type 'EventTracker.Auth.Application.DTOs.AzureAdCallbackDto'.
2025-12-16 15:36:32.478 +05:30 [INF] Azure AD callback received
2025-12-16 15:36:32.479 +05:30 [INF] Authenticating with Azure AD token
2025-12-16 15:36:32.481 +05:30 [INF] Azure AD user: harshgaikwadofficial@gmail.com (ID: fa6d8e40-ed52-44cf-8bd4-7efae237070d)
2025-12-16 15:36:32.546 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 15:36:32.553 +05:30 [DBG] Creating DbConnection.
2025-12-16 15:36:32.555 +05:30 [DBG] Created DbConnection. (1ms).
2025-12-16 15:36:32.557 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:32.560 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:32.562 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:36:32.564 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-16 15:36:32.567 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-16 15:36:32.569 +05:30 [DBG] Executing DbCommand [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:36:32.574 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__azureAdId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AzureAdId], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[LastLoginAt], [t].[LastName], [t].[ProfilePictureUrl], [t].[Role], [t].[UpdatedAt], [u0].[Id], [u0].[Bio], [u0].[Company], [u0].[Country], [u0].[CreatedAt], [u0].[JobTitle], [u0].[PhoneNumber], [u0].[UpdatedAt], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AzureAdId], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[LastLoginAt], [u].[LastName], [u].[ProfilePictureUrl], [u].[Role], [u].[UpdatedAt]
    FROM [Users] AS [u]
    WHERE [u].[AzureAdId] = @__azureAdId_0
) AS [t]
LEFT JOIN [UserProfiles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id]
2025-12-16 15:36:32.584 +05:30 [DBG] Context 'AuthDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-16 15:36:32.589 +05:30 [DBG] Closing data reader to 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:32.591 +05:30 [DBG] A data reader for 'EventTracker_Auth' on server '(local)' is being disposed after spending 14ms reading results.
2025-12-16 15:36:32.594 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:32.597 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 15:36:32.601 +05:30 [DBG] An entity of type 'User' tracked by 'AuthDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-16 15:36:32.604 +05:30 [DBG] SaveChanges starting for 'AuthDbContext'.
2025-12-16 15:36:32.606 +05:30 [DBG] DetectChanges starting for 'AuthDbContext'.
2025-12-16 15:36:32.608 +05:30 [DBG] DetectChanges completed for 'AuthDbContext'.
2025-12-16 15:36:32.622 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:32.624 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:32.627 +05:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-16 15:36:32.629 +05:30 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-16 15:36:32.631 +05:30 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-16 15:36:32.634 +05:30 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 450), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AzureAdId] = @p0, [CreatedAt] = @p1, [Email] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginAt] = @p5, [LastName] = @p6, [ProfilePictureUrl] = @p7, [Role] = @p8, [UpdatedAt] = @p9
OUTPUT 1
WHERE [Id] = @p10;
2025-12-16 15:36:32.647 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 450), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AzureAdId] = @p0, [CreatedAt] = @p1, [Email] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginAt] = @p5, [LastName] = @p6, [ProfilePictureUrl] = @p7, [Role] = @p8, [UpdatedAt] = @p9
OUTPUT 1
WHERE [Id] = @p10;
2025-12-16 15:36:32.655 +05:30 [DBG] Closing data reader to 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:32.657 +05:30 [DBG] A data reader for 'EventTracker_Auth' on server '(local)' is being disposed after spending 5ms reading results.
2025-12-16 15:36:32.660 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:32.663 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 15:36:32.668 +05:30 [DBG] An entity of type 'User' tracked by 'AuthDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-16 15:36:32.672 +05:30 [DBG] SaveChanges completed for 'AuthDbContext' with 1 entities written to the database.
2025-12-16 15:36:32.675 +05:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-16 15:36:32.681 +05:30 [DBG] No information found on request to perform content negotiation.
2025-12-16 15:36:32.683 +05:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-16 15:36:32.685 +05:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-16 15:36:32.686 +05:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-16 15:36:32.688 +05:30 [INF] Executing OkObjectResult, writing value of type 'EventTracker.Auth.Application.DTOs.LoginResponseDto'.
2025-12-16 15:36:32.691 +05:30 [INF] Executed action EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API) in 234.732ms
2025-12-16 15:36:32.694 +05:30 [INF] Executed endpoint 'EventTracker.Auth.API.Controllers.AuthController.AzureAdCallback (EventTracker.Auth.API)'
2025-12-16 15:36:32.696 +05:30 [DBG] Connection id "0HNHSHAU9HSBP" completed keep alive response.
2025-12-16 15:36:32.698 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 15:36:32.700 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 15:36:32.702 +05:30 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-16 15:36:32.704 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5085/api/auth/azure-ad-callback - 200 null application/json; charset=utf-8 276.2063ms
2025-12-16 15:38:44.555 +05:30 [DBG] Connection id "0HNHSHAU9HSBP" disconnecting.
2025-12-16 15:38:44.567 +05:30 [DBG] Connection id "0HNHSHAU9HSBP" stopped.
2025-12-16 15:38:44.578 +05:30 [DBG] Connection id "0HNHSHAU9HSBP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-16 23:27:07.551 +05:30 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-16 23:27:08.153 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 23:27:08.168 +05:30 [DBG] Creating DbConnection.
2025-12-16 23:27:08.204 +05:30 [DBG] Created DbConnection. (35ms).
2025-12-16 23:27:08.212 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:27:08.407 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:27:08.414 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 23:27:08.422 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2025-12-16 23:27:08.424 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (12ms).
2025-12-16 23:27:08.432 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 23:27:08.455 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 23:27:08.459 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:27:08.468 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (5ms).
2025-12-16 23:27:08.471 +05:30 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-16 23:27:08.472 +05:30 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-12-16 23:27:08.473 +05:30 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-12-16 23:27:08.475 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:27:08.477 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:27:08.478 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 23:27:08.543 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 23:27:08.545 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:27:08.546 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (1ms).
2025-12-16 23:27:08.549 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 23:27:08.552 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:27:08.553 +05:30 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-16 23:27:08.609 +05:30 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-16 23:27:08.669 +05:30 [DBG] Hosting starting
2025-12-16 23:27:08.682 +05:30 [INF] User profile is available. Using 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-16 23:27:08.692 +05:30 [DBG] Reading data from file 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys\key-0f9824b6-b006-44d6-96a0-7f00dad5e3f2.xml'.
2025-12-16 23:27:08.709 +05:30 [DBG] Found key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2}.
2025-12-16 23:27:08.719 +05:30 [DBG] Considering key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} with expiration date 2026-03-11 06:25:41Z as default key.
2025-12-16 23:27:08.728 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 23:27:08.730 +05:30 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-16 23:27:08.732 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 23:27:08.737 +05:30 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-16 23:27:08.744 +05:30 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-16 23:27:08.749 +05:30 [DBG] Using key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} as the default key.
2025-12-16 23:27:08.753 +05:30 [DBG] Key ring with default key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} was loaded during application startup.
2025-12-16 23:27:08.839 +05:30 [INF] Now listening on: http://localhost:5085
2025-12-16 23:27:08.840 +05:30 [DBG] Loaded hosting startup assembly EventTracker.Auth.API
2025-12-16 23:27:08.841 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-12-16 23:27:08.842 +05:30 [INF] Hosting environment: Development
2025-12-16 23:27:08.843 +05:30 [INF] Content root path: C:\Users\w199615\OneDrive - Worldline SA\Projects\event-tracking-tool\src\Services\EventTracker.Auth\EventTracker.Auth.API
2025-12-16 23:27:08.845 +05:30 [DBG] Hosting started
2025-12-16 23:28:44.303 +05:30 [DBG] Connection id "0HNHSPJ0GPMPC" accepted.
2025-12-16 23:28:44.305 +05:30 [DBG] Connection id "0HNHSPJ0GPMPC" started.
2025-12-16 23:28:44.341 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5085/api/auth/azure-ad-login-url - null null
2025-12-16 23:28:44.347 +05:30 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-16 23:28:44.370 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-login-url'
2025-12-16 23:28:44.374 +05:30 [DBG] Endpoint 'EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API)' with route pattern 'api/Auth/azure-ad-login-url' is valid for the request path '/api/auth/azure-ad-login-url'
2025-12-16 23:28:44.376 +05:30 [DBG] Request matched endpoint 'EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API)'
2025-12-16 23:28:44.399 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 23:28:44.401 +05:30 [WRN] Failed to determine the https port for redirect.
2025-12-16 23:28:44.404 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 23:28:44.406 +05:30 [INF] CORS policy execution successful.
2025-12-16 23:28:44.443 +05:30 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-16 23:28:44.448 +05:30 [INF] Executing endpoint 'EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API)'
2025-12-16 23:28:44.463 +05:30 [INF] Route matched with {action = "GetAzureAdLoginUrl", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAzureAdLoginUrl() on controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API).
2025-12-16 23:28:44.467 +05:30 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-16 23:28:44.469 +05:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-16 23:28:44.471 +05:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-16 23:28:44.474 +05:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-16 23:28:44.476 +05:30 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-16 23:28:44.479 +05:30 [DBG] Executing controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 23:28:44.565 +05:30 [DBG] Executed controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 23:28:44.569 +05:30 [INF] Azure AD login URL requested
2025-12-16 23:28:44.573 +05:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-16 23:28:44.580 +05:30 [DBG] No information found on request to perform content negotiation.
2025-12-16 23:28:44.581 +05:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-16 23:28:44.582 +05:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-16 23:28:44.585 +05:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-16 23:28:44.588 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-16 23:28:44.616 +05:30 [INF] Executed action EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API) in 134.7927ms
2025-12-16 23:28:44.619 +05:30 [INF] Executed endpoint 'EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API)'
2025-12-16 23:28:44.621 +05:30 [DBG] Connection id "0HNHSPJ0GPMPC" completed keep alive response.
2025-12-16 23:28:44.625 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5085/api/auth/azure-ad-login-url - 200 null application/json; charset=utf-8 284.952ms
2025-12-16 23:30:56.419 +05:30 [DBG] Connection id "0HNHSPJ0GPMPC" disconnecting.
2025-12-16 23:30:56.423 +05:30 [DBG] Connection id "0HNHSPJ0GPMPC" stopped.
2025-12-16 23:30:56.427 +05:30 [DBG] Connection id "0HNHSPJ0GPMPC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-16 23:37:32.369 +05:30 [INF] Application is shutting down...
2025-12-16 23:37:32.370 +05:30 [DBG] Hosting stopping
2025-12-16 23:37:32.376 +05:30 [DBG] Hosting stopped
2025-12-16 23:37:37.291 +05:30 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-16 23:37:37.911 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 23:37:37.924 +05:30 [DBG] Creating DbConnection.
2025-12-16 23:37:37.957 +05:30 [DBG] Created DbConnection. (32ms).
2025-12-16 23:37:37.963 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:37:38.114 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:37:38.120 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 23:37:38.126 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2025-12-16 23:37:38.128 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (9ms).
2025-12-16 23:37:38.136 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 23:37:38.160 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 23:37:38.164 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:37:38.173 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (7ms).
2025-12-16 23:37:38.176 +05:30 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-16 23:37:38.177 +05:30 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-12-16 23:37:38.179 +05:30 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-12-16 23:37:38.180 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:37:38.182 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:37:38.184 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 23:37:38.234 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 23:37:38.236 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:37:38.237 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (1ms).
2025-12-16 23:37:38.239 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 23:37:38.242 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:37:38.244 +05:30 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-16 23:37:38.272 +05:30 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-16 23:37:38.304 +05:30 [DBG] Hosting starting
2025-12-16 23:37:38.312 +05:30 [INF] User profile is available. Using 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-16 23:37:38.318 +05:30 [DBG] Reading data from file 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys\key-0f9824b6-b006-44d6-96a0-7f00dad5e3f2.xml'.
2025-12-16 23:37:38.323 +05:30 [DBG] Found key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2}.
2025-12-16 23:37:38.329 +05:30 [DBG] Considering key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} with expiration date 2026-03-11 06:25:41Z as default key.
2025-12-16 23:37:38.332 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 23:37:38.333 +05:30 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-16 23:37:38.335 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 23:37:38.338 +05:30 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-16 23:37:38.340 +05:30 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-16 23:37:38.342 +05:30 [DBG] Using key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} as the default key.
2025-12-16 23:37:38.343 +05:30 [DBG] Key ring with default key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} was loaded during application startup.
2025-12-16 23:37:38.371 +05:30 [INF] Now listening on: http://localhost:5085
2025-12-16 23:37:38.372 +05:30 [DBG] Loaded hosting startup assembly EventTracker.Auth.API
2025-12-16 23:37:38.373 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-12-16 23:37:38.374 +05:30 [INF] Hosting environment: Development
2025-12-16 23:37:38.375 +05:30 [INF] Content root path: C:\Users\w199615\OneDrive - Worldline SA\Projects\event-tracking-tool\src\Services\EventTracker.Auth\EventTracker.Auth.API
2025-12-16 23:37:38.376 +05:30 [DBG] Hosting started
2025-12-16 23:37:57.681 +05:30 [DBG] Connection id "0HNHSPO5E7DOK" accepted.
2025-12-16 23:37:57.685 +05:30 [DBG] Connection id "0HNHSPO5E7DOK" started.
2025-12-16 23:37:57.749 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5085/api/auth/azure-ad-login-url - null null
2025-12-16 23:37:57.781 +05:30 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-16 23:37:57.811 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-login-url'
2025-12-16 23:37:57.816 +05:30 [DBG] Endpoint 'EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API)' with route pattern 'api/Auth/azure-ad-login-url' is valid for the request path '/api/auth/azure-ad-login-url'
2025-12-16 23:37:57.821 +05:30 [DBG] Request matched endpoint 'EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API)'
2025-12-16 23:37:57.842 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 23:37:57.844 +05:30 [WRN] Failed to determine the https port for redirect.
2025-12-16 23:37:57.846 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 23:37:57.848 +05:30 [INF] CORS policy execution successful.
2025-12-16 23:37:57.882 +05:30 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-16 23:37:57.887 +05:30 [INF] Executing endpoint 'EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API)'
2025-12-16 23:37:57.903 +05:30 [INF] Route matched with {action = "GetAzureAdLoginUrl", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAzureAdLoginUrl() on controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API).
2025-12-16 23:37:57.909 +05:30 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-16 23:37:57.912 +05:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-16 23:37:57.915 +05:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-16 23:37:57.919 +05:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-16 23:37:57.922 +05:30 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-16 23:37:57.927 +05:30 [DBG] Executing controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 23:37:58.022 +05:30 [DBG] Executed controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 23:37:58.025 +05:30 [INF] Azure AD login URL requested
2025-12-16 23:37:58.028 +05:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-16 23:37:58.034 +05:30 [DBG] No information found on request to perform content negotiation.
2025-12-16 23:37:58.036 +05:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-16 23:37:58.038 +05:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-16 23:37:58.040 +05:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-16 23:37:58.042 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-16 23:37:58.067 +05:30 [INF] Executed action EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API) in 138.3734ms
2025-12-16 23:37:58.070 +05:30 [INF] Executed endpoint 'EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API)'
2025-12-16 23:37:58.072 +05:30 [DBG] Connection id "0HNHSPO5E7DOK" completed keep alive response.
2025-12-16 23:37:58.075 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5085/api/auth/azure-ad-login-url - 200 null application/json; charset=utf-8 328.8717ms
2025-12-16 23:40:09.328 +05:30 [DBG] Connection id "0HNHSPO5E7DOK" disconnecting.
2025-12-16 23:40:09.331 +05:30 [DBG] Connection id "0HNHSPO5E7DOK" stopped.
2025-12-16 23:40:09.334 +05:30 [DBG] Connection id "0HNHSPO5E7DOK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-16 23:40:29.236 +05:30 [DBG] Config reload token fired. Checking for changes...
2025-12-16 23:40:29.493 +05:30 [DBG] Config reload token fired. Checking for changes...
2025-12-16 23:40:32.173 +05:30 [DBG] Config reload token fired. Checking for changes...
2025-12-16 23:40:32.442 +05:30 [DBG] Config reload token fired. Checking for changes...
2025-12-16 23:41:06.110 +05:30 [DBG] Config reload token fired. Checking for changes...
2025-12-16 23:41:06.374 +05:30 [DBG] Config reload token fired. Checking for changes...
2025-12-16 23:41:53.951 +05:30 [INF] Application is shutting down...
2025-12-16 23:41:53.953 +05:30 [DBG] Hosting stopping
2025-12-16 23:41:53.969 +05:30 [DBG] Hosting stopped
2025-12-16 23:41:58.732 +05:30 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-16 23:41:59.211 +05:30 [DBG] Entity Framework Core 8.0.0 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2025-12-16 23:41:59.225 +05:30 [DBG] Creating DbConnection.
2025-12-16 23:41:59.257 +05:30 [DBG] Created DbConnection. (30ms).
2025-12-16 23:41:59.264 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:41:59.405 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:41:59.411 +05:30 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-16 23:41:59.417 +05:30 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2025-12-16 23:41:59.420 +05:30 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (9ms).
2025-12-16 23:41:59.427 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 23:41:59.448 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-16 23:41:59.452 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:41:59.458 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (3ms).
2025-12-16 23:41:59.461 +05:30 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-16 23:41:59.462 +05:30 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-12-16 23:41:59.463 +05:30 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-12-16 23:41:59.464 +05:30 [DBG] Opening connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:41:59.466 +05:30 [DBG] Opened connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:41:59.468 +05:30 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 23:41:59.518 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-12-16 23:41:59.520 +05:30 [DBG] Closing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:41:59.522 +05:30 [DBG] Closed connection to database 'EventTracker_Auth' on server '(local)' (2ms).
2025-12-16 23:41:59.525 +05:30 [DBG] 'AuthDbContext' disposed.
2025-12-16 23:41:59.528 +05:30 [DBG] Disposing connection to database 'EventTracker_Auth' on server '(local)'.
2025-12-16 23:41:59.531 +05:30 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-16 23:41:59.562 +05:30 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-16 23:41:59.592 +05:30 [DBG] Hosting starting
2025-12-16 23:41:59.602 +05:30 [INF] User profile is available. Using 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-16 23:41:59.607 +05:30 [DBG] Reading data from file 'C:\Users\w199615\AppData\Local\ASP.NET\DataProtection-Keys\key-0f9824b6-b006-44d6-96a0-7f00dad5e3f2.xml'.
2025-12-16 23:41:59.611 +05:30 [DBG] Found key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2}.
2025-12-16 23:41:59.619 +05:30 [DBG] Considering key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} with expiration date 2026-03-11 06:25:41Z as default key.
2025-12-16 23:41:59.621 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 23:41:59.622 +05:30 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-16 23:41:59.624 +05:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-16 23:41:59.628 +05:30 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-16 23:41:59.630 +05:30 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-16 23:41:59.632 +05:30 [DBG] Using key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} as the default key.
2025-12-16 23:41:59.634 +05:30 [DBG] Key ring with default key {0f9824b6-b006-44d6-96a0-7f00dad5e3f2} was loaded during application startup.
2025-12-16 23:41:59.663 +05:30 [INF] Now listening on: http://localhost:5085
2025-12-16 23:41:59.665 +05:30 [DBG] Loaded hosting startup assembly EventTracker.Auth.API
2025-12-16 23:41:59.666 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-12-16 23:41:59.667 +05:30 [INF] Hosting environment: Development
2025-12-16 23:41:59.669 +05:30 [INF] Content root path: C:\Users\w199615\OneDrive - Worldline SA\Projects\event-tracking-tool\src\Services\EventTracker.Auth\EventTracker.Auth.API
2025-12-16 23:41:59.669 +05:30 [DBG] Hosting started
2025-12-16 23:42:14.955 +05:30 [DBG] Connection id "0HNHSPQI3P44G" accepted.
2025-12-16 23:42:14.958 +05:30 [DBG] Connection id "0HNHSPQI3P44G" started.
2025-12-16 23:42:14.995 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5085/api/auth/azure-ad-login-url - null null
2025-12-16 23:42:15.004 +05:30 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-16 23:42:15.031 +05:30 [DBG] 1 candidate(s) found for the request path '/api/auth/azure-ad-login-url'
2025-12-16 23:42:15.036 +05:30 [DBG] Endpoint 'EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API)' with route pattern 'api/Auth/azure-ad-login-url' is valid for the request path '/api/auth/azure-ad-login-url'
2025-12-16 23:42:15.040 +05:30 [DBG] Request matched endpoint 'EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API)'
2025-12-16 23:42:15.059 +05:30 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-16 23:42:15.062 +05:30 [WRN] Failed to determine the https port for redirect.
2025-12-16 23:42:15.065 +05:30 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-12-16 23:42:15.068 +05:30 [INF] CORS policy execution successful.
2025-12-16 23:42:15.106 +05:30 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-16 23:42:15.112 +05:30 [INF] Executing endpoint 'EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API)'
2025-12-16 23:42:15.125 +05:30 [INF] Route matched with {action = "GetAzureAdLoginUrl", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAzureAdLoginUrl() on controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API).
2025-12-16 23:42:15.132 +05:30 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-16 23:42:15.134 +05:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-16 23:42:15.139 +05:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-16 23:42:15.143 +05:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-16 23:42:15.146 +05:30 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-16 23:42:15.150 +05:30 [DBG] Executing controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 23:42:15.238 +05:30 [DBG] Executed controller factory for controller EventTracker.Auth.API.Controllers.AuthController (EventTracker.Auth.API)
2025-12-16 23:42:15.242 +05:30 [INF] Azure AD login URL requested
2025-12-16 23:42:15.245 +05:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-16 23:42:15.251 +05:30 [DBG] No information found on request to perform content negotiation.
2025-12-16 23:42:15.252 +05:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-16 23:42:15.255 +05:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-16 23:42:15.257 +05:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-16 23:42:15.260 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-16 23:42:15.287 +05:30 [INF] Executed action EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API) in 133.8312ms
2025-12-16 23:42:15.291 +05:30 [INF] Executed endpoint 'EventTracker.Auth.API.Controllers.AuthController.GetAzureAdLoginUrl (EventTracker.Auth.API)'
2025-12-16 23:42:15.292 +05:30 [DBG] Connection id "0HNHSPQI3P44G" completed keep alive response.
2025-12-16 23:42:15.296 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5085/api/auth/azure-ad-login-url - 200 null application/json; charset=utf-8 303.7901ms
2025-12-16 23:44:26.575 +05:30 [DBG] Connection id "0HNHSPQI3P44G" disconnecting.
2025-12-16 23:44:26.577 +05:30 [DBG] Connection id "0HNHSPQI3P44G" stopped.
2025-12-16 23:44:26.579 +05:30 [DBG] Connection id "0HNHSPQI3P44G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-16 23:46:30.048 +05:30 [INF] Application is shutting down...
2025-12-16 23:46:30.048 +05:30 [DBG] Hosting stopping
2025-12-16 23:46:30.054 +05:30 [DBG] Hosting stopped
